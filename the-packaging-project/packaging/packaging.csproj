<Project Sdk="Microsoft.Build.NoTargets/3.5.6">
    <PropertyGroup>
        <TargetFramework>net7.0</TargetFramework>
        <GeneratePackageOnBuild>true</GeneratePackageOnBuild>

        <PackageId>My.Custom.Package</PackageId>
        <NoWarn>$(NoWarn);NU5100</NoWarn>
    </PropertyGroup>

    <ItemGroup>
        <!-- Example of manually gathering build outputs. -->
        <Content Include="../ClassLib/staticfile.foo" PackagePath="extras" />

        <!-- 
            Example of trying to glob a generated file too soon.
            There will not be a `foo` folder in `extras` because `GeneratedFile` wasn't found.
            Note: Clean the `ClassLib` project before building this project to see this in action.
        -->
        <Content Include="../ClassLib/*.xml" PackagePath="extras/foo" />
    </ItemGroup>

    <ItemGroup>
        <!-- 
            Private=true (default): Allows copying outputs from ProjectReferences.
            Private=false: Prevents outputs from being copied. (Overrides ReferenceOutputAssembly="true")

            ReferenceOutputAssembly=true: Copies the .dll/.pdb into the output folder. (default in Microsoft.NET.Sdk)
            ReferenceOutputAssembly=false: Does not copy the .dll/.pdb into the output folder. (default in Microsoft.Build.NoTargets)
        -->
        <ProjectReference Include="../ConsoleApp/ConsoleApp.csproj" Private="false" OutputItemType="ConsoleAppOutput" />
        <!-- ClassLib does not "double build" and we still get the output. -->
        <ProjectReference Include="../ClassLib/ClassLib.csproj" OutputItemType="ClassLibOutput" />
        <ProjectReference Include="../OtherLib/OtherLib.csproj" OutputItemType="OtherLibOutput" />
    </ItemGroup>

    <Target Name="GatherBuildOutputsForPack" AfterTargets="Build" BeforeTargets="Pack">
        <ItemGroup>
            <!-- Place the dll's into the nupkg -->
            <Content Include="@(ConsoleAppOutput)" PackagePath="app"/>
            <Content Include="@(ClassLibOutput)" PackagePath="app"/>
            <Content Include="@(OtherLibOutput)" PackagePath="lib/net7.0" />

            <!-- 
                Example of a file that MUST be globbed from a target, after the file was generated.
                If this file was included outside of a target, it would not be included in the nuget package.
            -->
            <Content Include="../ClassLib/*.xml" PackagePath="extras" />
        </ItemGroup>
    </Target>


</Project>